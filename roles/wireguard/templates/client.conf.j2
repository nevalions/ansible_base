# WireGuard Client Configuration for {{ peer_config.name }}
# Generated by Ansible - DO NOT EDIT MANUALLY
# Last updated: {{ ansible_date_time.iso8601 }}

[Interface]
Address = {{ peer_config.allowed_ips }}
PrivateKey = {{ peer_private_key }}
{% if peer_config.client_listen_port is defined %}
ListenPort = {{ peer_config.client_listen_port }}
{% else %}
ListenPort = {{ vault_wg_client_default_port }}
{% endif %}
DNS = {{ vault_wg_dns_primary | vault_dns_server_primary | default('1.1.1.1') }}

[Peer]
PublicKey = {{ server_public_key }}
Endpoint = {{ ansible_default_ipv4.address }}:{{ vault_wg_server_port }}
AllowedIPs = {{ vault_wg_network_cidr }}
PersistentKeepalive = 25
