---
# Example Ansible Vault secrets file for libssh connection
# This file should be encrypted with ansible-vault

# SSH key passphrase (for ~/.ssh/id_rsa)
vault_ssh_key_passphrase: "your_ssh_key_passphrase_here"

# Sudo/become password for workers_all
vault_become_pass: "your_sudo_password_here"

# DNS Server Configuration
vault_dns_zone: "cluster.local"

vault_dns_servers:
  - "[primary-dns-server-ip]"
  - "[secondary-dns-server-ip]"

vault_dns_server_primary: "[primary-dns-server-ip]"
vault_dns_server_secondary: "[secondary-dns-server-ip]"

vault_dns_records:
  # Node hostnames
  - type: "A"
    name: "[plane1-hostname]"
    ip: "[plane1-ip]"
  - type: "A"
    name: "[plane2-hostname]"
    ip: "[plane2-ip]"
  - type: "A"
    name: "[worker1-hostname]"
    ip: "[worker1-ip]"
  - type: "A"
    name: "[worker2-hostname]"
    ip: "[worker2-ip]"
  
  # Kubernetes services (external ingress/LoadBalancer)
  - type: "A"
    name: "[ingress-hostname]"
    ip: "[ingress-ip]"
  - type: "A"
    name: "[longhorn-hostname]"
    ip: "[longhorn-ip]"
  
  # Infrastructure services
  - type: "A"
    name: "[nfs-hostname]"
    ip: "[nfs-ip]"

# DNS configuration
vault_dns_allowed_networks:
  # Add all networks that should be able to query DNS
  # This list supports multiple networks for flexible deployment
  # - Always include localhost for local queries
  - "[physical-network-cidr]"
  - "[vpn-network-cidr]"
  - "[cloud-network-cidr]"
  - "127.0.0.0/8"

# Connection settings for DNS servers
vault_dns_ansible_user: "[username]"
vault_dns_ansible_port: "[ssh-port]"
vault_dns_ssh_key_path: "[/path/to/key]"

# WireGuard Configuration
vault_wg_interface: "[interface-name]"
vault_wg_server_port: "[server-port]"
vault_wg_client_default_port: "[client-default-port]"
vault_wg_client_port_start: "[port-range-start]"
vault_wg_client_port_end: "[port-range-end]"
vault_wg_network_cidr: "[vpn-network-cidr]"
vault_wg_server_ip: "[server-vpn-ip]"
vault_wg_dns_primary: "[dns-server-ip]"

# WireGuard Server Keys (auto-generated, store here after first deployment)
vault_wg_server_private_key: null
vault_wg_server_public_key: null

# WireGuard Peers Configuration
# Each peer maps to a host group in inventory
vault_wg_peers:
  - name: "[peer-name]"
    host_group: "[ansible-host-group]"
    allowed_ips: "[peer-vpn-ip]/32"
    endpoint: "[peer-public-ip]:[port]"
    client_listen_port: "[unique-port-for-nat-peers]"

# Auto-generated peer keys (populated during deployment)
# Example format:
# vault_wg_peer_private_keys:
#   peer1: "private-key-here"
#   peer2: "private-key-here"
# vault_wg_peer_public_keys:
#   peer1: "public-key-here"
#   peer2: "public-key-here"
vault_wg_peer_private_keys: {}
vault_wg_peer_public_keys: {}

# WireGuard Firewall Configuration
vault_wg_allowed_networks:
  - "[physical-network-cidr]"
  - "[vpn-network-cidr]"
  - "[cloud-network-cidr]"
  - "127.0.0.0/8"

# DNS Client Options (optional, for resolv.conf settings)
vault_dns_client_options:
  - "timeout:2"
  - "attempts:3"
  - "rotate"
